<div class="bgwrap">
  <div class="bgmove">
    <!-- Public domain background-image from: https://pixabay.com/en/cityscape-night-buildings-871743/ -->
  </div>
  <!-- <div class="text">Begin</div> -->
  <div class="text2">

    <h2>Sign up</h2>

    <%= form_for(resource, as: resource_name, url: registration_path(resource_name)) do |f| %>
      <%= devise_error_messages! %>

      <div class="field">
        <%= f.label :email %><br />
        <%= f.email_field :email, autofocus: true, autocomplete: "email" %>
      </div>

      <div class="field">
        <%= f.label :password %>
        <% if @minimum_password_length %>
        <em>(<%= @minimum_password_length %> characters minimum)</em>
        <% end %><br />
        <%= f.password_field :password, autocomplete: "off" %>
      </div>

      <div class="field">
        <%= f.label :password_confirmation %><br />
        <%= f.password_field :password_confirmation, autocomplete: "off" %>
      </div>

      <div class="actions">
        <%= f.submit "Sign up" %>
      </div>
    <% end %>

    <%= render "devise/shared/links" %>

  </div>
</div>




<script>

(function(){

    // Set scale - between 1.00 and 1.99
    var scale = 1.05;


    // Init ---

    // Select container to be css transformed
    var container = document.getElementsByClassName("bgmove")[0];

    // Get container dimensions
    getContainerDimensions();

    // Calculate offset each direction
    var offset = ((scale - Math.floor(scale)) / 2) * 100;

    // Prepare css and browser prefix
    scale = "scale(" + scale + ")";
      container.style.webkitTransform = scale;
      container.style.MozTransform = scale;
      container.style.msTransform = scale;
      container.style.OTransform = scale;
      container.style.transform = scale;


    // Event listeners ---

    window.addEventListener("resize", function() {
      getContainerDimensions()
    });

    container.addEventListener("mousemove", function(e) {
    moveBgImage(e);
    });


    // Helper functions ---

    function getContainerDimensions() {
      width = container.offsetWidth;
      height = container.offsetHeight;
    }

    function moveBgImage(e) {
    // Find center of container
      var pageX = e.pageX - (width / 2);
      var pageY = e.pageY - (height / 2);

    // Calculate movement
      var newX = -(pageX / ((width/2)/offset));
      var newY = -(pageY / ((height/2)/offset));

    // Move bgimage
      container.style.webkitTransform = "translate(" + newX + "%," + newY + "%) " + scale;
      container.style.MozTransform = "translate(" + newX + "%," + newY + "%) " + scale;
      container.style.msTransform = "translate(" + newX + "%," + newY + "%) " + scale;
      container.style.OTransform = "translate(" + newX + "%," + newY + "%) " + scale;
      container.style.transform = "translate(" + newX + "%," + newY + "%) " + scale;
    }


    })();

</script>
